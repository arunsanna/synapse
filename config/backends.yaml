# Synapse backend registry.
# Deployed as ConfigMap and mounted at /config/backends.yaml in the gateway pod.

backends:
  # --- LLM ---
  llama-embed:
    url: http://llama-embed.llm-infra.svc.cluster.local:8081
    type: openai-compatible
    health: /health

  llama-router:
    url: http://llama-router.llm-infra.svc.cluster.local:8082
    type: openai-compatible
    health: /health

  # vllm:
  #   url: http://vllm-inference.llm-infra.svc.cluster.local:8001
  #   type: openai-compatible
  #   health: /health

  # --- Speech + Audio ---
  chatterbox-tts:
    url: http://chatterbox-tts.llm-infra.svc.cluster.local:8004
    type: chatterbox
    health: /api/ui/initial-data

  whisper-stt:
    url: http://whisper-stt.llm-infra.svc.cluster.local:8000
    type: faster-whisper
    health: /health

  pyannote-speaker:
    url: http://pyannote-speaker.llm-infra.svc.cluster.local:8000
    type: pyannote
    health: /health

  deepfilter-audio:
    url: http://deepfilter-audio.llm-infra.svc.cluster.local:8000
    type: deepfilter
    health: /health

routes:
  /v1/embeddings: llama-embed
  /v1/chat/completions: llama-router
  /models: llama-router
  /models/load: llama-router
  /models/unload: llama-router
  /v1/models: llama-router
  /tts/*: chatterbox-tts
  /stt/*: whisper-stt
  /speakers/*: pyannote-speaker
  /audio/*: deepfilter-audio
